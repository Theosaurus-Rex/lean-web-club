<h2>Change Username</h2>
<p>Enter your username and password to change your username.</p>

<form>
  <div>
    <label for="username">Username</label>
    <input type="text" name="username" id="username" />
  </div>

  <div>
    <label for="password">Password</label>
    <input type="password" name="password" id="password" />
  </div>

  <div>
    <label for="show-password">
      <input
        type="checkbox"
        name="show-password"
        id="show-password"
        data-pw-toggle="#password"
      />
      Show password
    </label>
  </div>

  <p>
    <button type="submit">Change Username</button>
  </p>
</form>

<h2>Change Password</h2>
<p>Enter your current password and new password below.</p>

<form>
  <div>
    <label for="current-password">Current Password</label>
    <input type="password" name="current-password" id="current-password" />
  </div>

  <div>
    <label for="new-password">New Password</label>
    <input type="password" name="new-password" id="new-password" />
  </div>

  <div>
    <label for="show-passwords">
      <input
        type="checkbox"
        name="show-passwords"
        id="show-passwords"
        data-pw-toggle="#current-password, #new-password"
      />
      Show passwords
    </label>
  </div>

  <p>
    <button type="submit">Change Passwords</button>
  </p>
</form>

<script>
  document.addEventListener("click", function (event) {
    // Early return if the clicked element is not a password toggle
    if (!event.target.matches("[data-pw-toggle]")) return;

    // Get the password fields defined in the data-pw-toggle attribute of the clicked checkbox
    // This will only return the relevant password fields associated with the parent form of the clicked checkbox
    let selector = event.target.getAttribute("data-pw-toggle");
    let passwords = document.querySelectorAll(selector);

    for (let password of passwords) {
      if (event.target.checked) {
        password.type = "text";
      } else {
        password.type = "password";
      }
    }
  });
</script>
